# SMSG_ACCOUNT_DATA_TIMES

## Client Version 1.12, Client Version 2

### Comment

The purpose of this message is unknown, but it is required in order to prevent the chat box from being a white rectangle that is unable to show text.

Sending this causes the client to send [CMSG_UPDATE_ACCOUNT_DATA](./cmsg_update_account_data.md) messages.

[CMSG_UPDATE_ACCOUNT_DATA](./cmsg_update_account_data.md) and [CMSG_REQUEST_ACCOUNT_DATA](./cmsg_request_account_data.md) act on blocks numbered 0 to 7. The 32 u32s in this message could possibly actually be 8 sets of u8[16](./16.md) but it could also be a variable sized message.

### Wowm Representation

Autogenerated from `wowm` file at [`wow_message_parser/wowm/world/login_logout/smsg_account_data_times.wowm:1`](https://github.com/gtker/wow_messages/tree/main/wow_message_parser/wowm/world/login_logout/smsg_account_data_times.wowm#L1).
```rust,ignore
smsg SMSG_ACCOUNT_DATA_TIMES = 0x0209 {
    u32[32] data;
}
```
### Header

SMSG have a header of 4 bytes.

#### SMSG Header

| Offset | Size / Endianness | Type   | Name   | Description |
| ------ | ----------------- | ------ | ------ | ----------- |
| 0x00   | 2 / Big           | uint16 | size   | Size of the rest of the message including the opcode field but not including the size field.|
| 0x02   | 2 / Little        | uint16 | opcode | Opcode that determines which fields the message contains.|

### Body

| Offset | Size / Endianness | Type | Name | Description | Comment |
| ------ | ----------------- | ---- | ---- | ----------- | ------- |
| 0x04 | 128 / - | u32[32] | data |  | cmangos/vmangos/mangoszero sets to all zeros |

### Examples

#### Example 1

##### Description

Zeroed out message needed for showing chat box.

```c
0, 130, // size
9, 2, // opcode (521)
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // data: u32[32]
```
## Client Version 3.3.5

### Comment

Indicate when each piece of account data was last updated by a [CMSG_UPDATE_ACCOUNT_DATA](./cmsg_update_account_data.md). The client can check this against its own times to detect that more recent account data was written from a different client.

### Wowm Representation

Autogenerated from `wowm` file at [`wow_message_parser/wowm/world/login_logout/smsg_account_data_times.wowm:45`](https://github.com/gtker/wow_messages/tree/main/wow_message_parser/wowm/world/login_logout/smsg_account_data_times.wowm#L45).
```rust,ignore
smsg SMSG_ACCOUNT_DATA_TIMES = 0x0209 {
    u32 unix_time;
    u8 unknown1;
    CacheMask mask;
    u32[-] data;
}
```
### Header

SMSG have a header of 4 bytes.

#### SMSG Header

| Offset | Size / Endianness | Type   | Name   | Description |
| ------ | ----------------- | ------ | ------ | ----------- |
| 0x00   | 2 / Big           | uint16 | size   | Size of the rest of the message including the opcode field but not including the size field.|
| 0x02   | 2 / Little        | uint16 | opcode | Opcode that determines which fields the message contains.|

### Body

| Offset | Size / Endianness | Type | Name | Description | Comment |
| ------ | ----------------- | ---- | ---- | ----------- | ------- |
| 0x04 | 4 / Little | u32 | unix_time |  | Seconds since Unix Epoch |
| 0x08 | 1 / - | u8 | unknown1 |  | Both mangostwo and arcemu hardcode this to 1 |
| 0x09 | 4 / - | [CacheMask](cachemask.md) | mask |  |  |
| 0x0D | ? / - | u32[-] | data |  | Maximum size is 32 4-bit integers. For every bit that is 1 in the mask, write one u32 with the time |

